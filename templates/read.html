<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='pdfjs/web/viewer.css') }}">
</head>
<body>
    <div id="pdf-viewer">
        <div id="pdf-loader">Loading document...</div>
        <div id="pdf-contents"></div>
    </div>

    <input type="file" id="fileInput" accept=".pdf"> <!-- File input for uploading PDF -->

    <script src="{{ url_for('static', filename='pdfjs/build/pdf.js') }}"></script>
    <script>
        const pdfViewer = document.getElementById('pdf-viewer');
        const pdfLoader = document.getElementById('pdf-loader');
        const pdfContents = document.getElementById('pdf-contents');

        function loadPDF(pdfPath) {
            pdfjsLib.getDocument(pdfPath).promise.then(pdf => {
                pdfLoader.style.display = 'none';
                pdfContents.innerHTML = ''; // Clear previous contents
                for (let i = 1; i <= pdf.numPages; i++) {
                    pdf.getPage(i).then(page => {
                        const scale = 1.5;
                        const viewport = page.getViewport({ scale });
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        pdfContents.appendChild(canvas);
                        page.render({
                            canvasContext: context,
                            viewport: viewport
                        });
                    });
                }
            }).catch(error => {
                console.error('Error loading PDF:', error);
            });
        }

        document.getElementById('fileInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const pdfPath = URL.createObjectURL(file);
                loadPDF(pdfPath);
            }
        });
    </script>

    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <div class="col-md-4 d-flex align-items-center">
            <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
                <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
            </a>
            <span class="mb-3 mb-md-0 text-body-secondary">Â© 2024 TYBC, Inc</span>
        </div>

        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#twitter"></use></svg></a></li>
            <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#instagram"></use></svg></a></li>
            <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"></use></svg></a></li>
        </ul>
    </footer>
</body>
</html>
